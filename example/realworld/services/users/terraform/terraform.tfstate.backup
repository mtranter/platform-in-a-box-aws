{
  "version": 4,
  "terraform_version": "1.0.6",
  "serial": 120,
  "lineage": "01cdbaf8-0b80-c7b1-abf6-a87fc7a9599a",
  "outputs": {
    "base_url": {
      "value": "https://u202i3giu0.execute-api.ap-southeast-2.amazonaws.com/live",
      "type": "string"
    }
  },
  "resources": [
    {
      "module": "module.service",
      "mode": "data",
      "type": "archive_file",
      "name": "dependencies",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "excludes": null,
            "id": "171e1000428195862d71f87202cfa305a605b963",
            "output_base64sha256": "h9iz2EzPhsuK3L/yIyFyxna1UQWW01R3HtuZpGXdJ68=",
            "output_file_mode": null,
            "output_md5": "2ec8902a76b82631d24e5ca5d45d665f",
            "output_path": "./dependencies.zip",
            "output_sha": "171e1000428195862d71f87202cfa305a605b963",
            "output_size": 14924697,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": "./../package/dependencies",
            "source_file": null,
            "type": "zip"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.service",
      "mode": "data",
      "type": "archive_file",
      "name": "source",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "excludes": null,
            "id": "04cd356d4649edfd1368cc7ee8b6e535d47433b2",
            "output_base64sha256": "fJqtdfwGGzVvX2auGlt2+1etp7LTRb/4Td5I9VQrNIM=",
            "output_file_mode": null,
            "output_md5": "bffa88478ecd3673d8cc36ff25600f73",
            "output_path": "./source.zip",
            "output_sha": "04cd356d4649edfd1368cc7ee8b6e535d47433b2",
            "output_size": 3280,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": "./../package/dist",
            "source_file": null,
            "type": "zip"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.service",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "340502884936",
            "arn": "arn:aws:sts::340502884936:assumed-role/Admin/aws-go-sdk-1653037239919806389",
            "id": "340502884936",
            "user_id": "AROAU6R4NWJEPZNY6XSG3:aws-go-sdk-1653037239919806389"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.service",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "lambda_permissions",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "1728150126",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"CanDynamo\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"dynamodb:UpdateItem\",\n        \"dynamodb:Query\",\n        \"dynamodb:PutItem\",\n        \"dynamodb:GetItem\",\n        \"dynamodb:DeleteItem\",\n        \"dynamodb:BatchWriteItem\",\n        \"dynamodb:BatchGetItem\"\n      ],\n      \"Resource\": \"arn:aws:dynamodb:ap-southeast-2:340502884936:table/PricingService\"\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "dynamodb:BatchGetItem",
                  "dynamodb:BatchWriteItem",
                  "dynamodb:DeleteItem",
                  "dynamodb:GetItem",
                  "dynamodb:PutItem",
                  "dynamodb:Query",
                  "dynamodb:UpdateItem"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:dynamodb:ap-southeast-2:340502884936:table/PricingService"
                ],
                "sid": "CanDynamo"
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.service",
      "mode": "data",
      "type": "aws_region",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "Asia Pacific (Sydney)",
            "endpoint": "ec2.ap-southeast-2.amazonaws.com",
            "id": "ap-southeast-2",
            "name": "ap-southeast-2"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.service",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "lambda_permission",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "apiHandler",
          "schema_version": 0,
          "attributes": {
            "id": "PricingServiceApiHandlerExecutionRole:terraform-20220520065713657500000001",
            "name": "terraform-20220520065713657500000001",
            "name_prefix": null,
            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"CanDynamo\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"dynamodb:UpdateItem\",\n        \"dynamodb:Query\",\n        \"dynamodb:PutItem\",\n        \"dynamodb:GetItem\",\n        \"dynamodb:DeleteItem\",\n        \"dynamodb:BatchWriteItem\",\n        \"dynamodb:BatchGetItem\"\n      ],\n      \"Resource\": \"arn:aws:dynamodb:ap-southeast-2:340502884936:table/PricingService\"\n    }\n  ]\n}",
            "role": "PricingServiceApiHandlerExecutionRole"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.service.module.queue_handlers.aws_iam_role_policy.can_log",
            "module.service.module.queue_handlers.module.log_group.aws_kms_alias.alias",
            "module.service.module.queue_handlers.module.log_group.data.aws_region.current",
            "module.service.module.api_function.module.dlq.data.aws_iam_policy_document.key_policy",
            "module.service.module.queues.aws_kms_alias.alias",
            "module.service.module.queue_handlers.data.aws_region.current",
            "module.service.module.api_function.aws_cloudwatch_event_target.check_every_five_minutes",
            "module.service.module.api_function.module.dlq.aws_sqs_queue.dead_letter_queue",
            "module.service.module.api_function.module.dlq.aws_sqs_queue.queue",
            "module.service.module.queue_handlers.aws_iam_role_policy_attachment.enhanced_monitoring",
            "module.service.module.sns.aws_kms_key.key",
            "module.service.data.aws_region.current",
            "module.service.module.api_function.aws_iam_role_policy_attachment.enhanced_monitoring",
            "module.service.module.table.data.aws_region.current",
            "module.service.module.queue_handlers.aws_cloudwatch_event_target.check_every_five_minutes",
            "module.service.module.queue_handlers.aws_lambda_function.lambda",
            "module.service.module.queue_handlers.module.dlq.aws_sqs_queue.dead_letter_queue",
            "module.service.module.sns.data.aws_region.current",
            "module.service.module.table.aws_kms_key.key",
            "module.service.module.queue_handlers.aws_lambda_layer_version.layers",
            "module.service.module.queues.aws_sqs_queue_policy.this",
            "module.service.module.sns.module.errors_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.module.api_function.aws_lambda_layer_version.layers",
            "module.service.module.api_function.module.dlq.data.aws_caller_identity.me",
            "module.service.module.sns.data.aws_caller_identity.me",
            "module.service.module.sns.data.aws_iam_policy_document.can_log",
            "module.service.module.queue_handlers.aws_iam_role_policy_attachment.iam_for_lambda_role_eni",
            "module.service.module.queues.data.aws_region.current",
            "module.service.module.api_function.module.log_group.data.aws_caller_identity.me",
            "module.service.module.queues.data.aws_caller_identity.me",
            "module.service.module.queue_handlers.aws_lambda_permission.allow_cloudwatch_to_call_check_foo",
            "module.service.module.api_function.aws_lambda_permission.allow_cloudwatch_to_call_check_foo",
            "module.service.module.queue_handlers.module.dlq_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.module.queue_handlers.module.dlq.data.aws_region.current",
            "module.service.module.queue_handlers.module.dlq_failed_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.module.queue_handlers.module.log_group.aws_cloudwatch_log_group.log_group",
            "module.service.module.api_function.aws_lambda_alias.lambda_alias",
            "module.service.module.api_function.module.dlq_failed_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.module.api_function.module.max_duration_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.module.queue_handlers.data.aws_iam_policy_document.allow_dlq_kms_access",
            "module.service.module.queue_handlers.module.dlq.aws_sqs_queue.queue",
            "module.service.module.queue_handlers.module.max_duration_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.module.sns.aws_sns_topic.topic",
            "module.service.module.api_function.data.aws_region.current",
            "module.service.module.api_function.module.log_group.aws_cloudwatch_log_group.log_group",
            "module.service.module.api_function.module.log_group.aws_kms_key.key",
            "module.service.module.queue_access_policies.data.aws_iam_policy_document.allow_sns_kms_queue_access",
            "module.service.module.queue_access_policies.data.aws_iam_policy_document.queue_policy",
            "module.service.module.queue_handlers.module.log_group.aws_kms_key.key",
            "module.service.module.sns.aws_iam_role.failures_log",
            "module.service.module.queue_handlers.aws_iam_role.iam_for_lambda",
            "module.service.module.api_function.module.dlq.aws_kms_key.key",
            "module.service.module.queue_handlers.module.dlq.aws_kms_alias.alias",
            "module.service.module.queue_handlers.module.dlq.module.dlq_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.module.queues.aws_sqs_queue.queue",
            "module.service.module.api_function.aws_cloudwatch_event_rule.every_five_minutes",
            "module.service.module.queue_handlers.module.errors_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.module.api_function.aws_lambda_provisioned_concurrency_config.provisioned_concurrency",
            "module.service.module.api_function.module.dlq_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.module.queue_handlers.module.throttles_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.module.queues.data.aws_iam_policy_document.key_policy",
            "module.service.module.api_function.module.dlq.data.aws_region.current",
            "module.service.module.queue_handlers.aws_cloudwatch_event_rule.every_five_minutes",
            "module.service.module.queue_handlers.aws_iam_role_policy_attachment.aws_xray_write_only_access",
            "module.service.module.queues.aws_sqs_queue.dead_letter_queue",
            "module.service.module.table.data.aws_caller_identity.me",
            "module.service.module.api_function.module.log_group.data.aws_region.current",
            "module.service.module.queue_handlers.aws_iam_role_policy_attachment.insights_policy",
            "module.service.data.archive_file.source",
            "module.service.module.api_function.aws_iam_role_policy.can_log",
            "module.service.module.api_function.aws_iam_role_policy.dlq_role",
            "module.service.module.api_function.aws_iam_role_policy_attachment.iam_for_lambda_role_eni",
            "module.service.module.api_function.module.dlq.aws_sqs_queue_policy.this",
            "module.service.module.api_function.aws_iam_role_policy_attachment.insights_policy",
            "module.service.module.api_function.module.throttles_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.data.archive_file.dependencies",
            "module.service.module.queue_handlers.aws_lambda_provisioned_concurrency_config.provisioned_concurrency",
            "module.service.module.queues.module.dlq_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.data.aws_caller_identity.current",
            "module.service.module.api_function.aws_lambda_function.lambda",
            "module.service.module.api_function.data.aws_iam_policy_document.can_log",
            "module.service.module.queue_handlers.data.aws_iam_policy_document.can_sqs_dlq",
            "module.service.module.queue_handlers.module.log_group.data.aws_caller_identity.me",
            "module.service.module.queue_handlers.module.dlq.data.aws_caller_identity.me",
            "module.service.module.api_function.data.aws_iam_policy_document.can_sqs_dlq",
            "module.service.module.api_function.module.dlq.module.dlq_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.module.queue_handlers.data.aws_iam_policy_document.can_log",
            "module.service.module.queue_handlers.aws_iam_role_policy.dlq_role",
            "module.service.module.table.aws_dynamodb_table.table",
            "module.service.module.api_function.aws_iam_role_policy_attachment.aws_xray_write_only_access",
            "module.service.module.sns.data.aws_iam_policy_document.topic_policy",
            "module.service.module.api_function.data.aws_iam_policy_document.allow_dlq_kms_access",
            "module.service.module.api_function.module.dlq.aws_kms_alias.alias",
            "module.service.module.api_function.module.errors_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.module.queue_handlers.module.dlq.data.aws_iam_policy_document.key_policy",
            "module.service.module.sns.aws_iam_role_policy.can_log",
            "module.service.data.aws_iam_policy_document.lambda_permissions",
            "module.service.module.queue_handlers.aws_lambda_alias.lambda_alias",
            "module.service.module.queue_handlers.module.dlq.aws_kms_key.key",
            "module.service.module.queue_handlers.module.dlq.aws_sqs_queue_policy.this",
            "module.service.module.sns.data.aws_iam_policy_document.key_policy",
            "module.service.module.api_function.aws_iam_role.iam_for_lambda",
            "module.service.module.api_function.module.log_group.aws_kms_alias.alias",
            "module.service.module.queues.aws_kms_key.key",
            "module.service.module.sns.aws_kms_alias.alias"
          ]
        }
      ]
    },
    {
      "module": "module.service",
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "lambda_permission",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "PricingServiceApiHandler",
            "function_url_auth_type": null,
            "id": "AllowApiInvoke",
            "principal": "apigateway.amazonaws.com",
            "principal_org_id": null,
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:execute-api:ap-southeast-2:340502884936:u202i3giu0/*/*/*",
            "statement_id": "AllowApiInvoke",
            "statement_id_prefix": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.service.module.api_function.module.dlq.aws_sqs_queue.dead_letter_queue",
            "module.service.module.sns.aws_iam_role_policy.can_log",
            "module.service.module.sns.aws_kms_alias.alias",
            "module.service.module.sns.data.aws_caller_identity.me",
            "module.service.module.api_function.aws_iam_role.iam_for_lambda",
            "module.service.module.api_function.aws_lambda_function.lambda",
            "module.service.module.api_function.aws_lambda_layer_version.layers",
            "module.service.module.api_function.data.aws_region.current",
            "module.service.module.sns.data.aws_iam_policy_document.can_log",
            "module.service.module.sns.data.aws_region.current",
            "module.service.module.api_function.module.dlq.data.aws_caller_identity.me",
            "module.service.module.sns.aws_iam_role.failures_log",
            "module.service.module.sns.aws_kms_key.key",
            "module.service.module.api_function.module.dlq.data.aws_iam_policy_document.key_policy",
            "module.service.module.api_function.module.dlq.data.aws_region.current",
            "module.service.module.sns.data.aws_iam_policy_document.key_policy",
            "module.service.module.sns.data.aws_iam_policy_document.topic_policy",
            "module.service.data.archive_file.dependencies",
            "module.service.data.archive_file.source",
            "module.service.module.api.aws_api_gateway_rest_api.api",
            "module.service.module.api_function.module.dlq.aws_kms_key.key",
            "module.service.module.sns.module.errors_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.module.api_function.data.aws_iam_policy_document.allow_dlq_kms_access",
            "module.service.module.api_function.module.dlq.aws_sqs_queue.queue",
            "module.service.module.sns.aws_sns_topic.topic"
          ]
        }
      ]
    },
    {
      "module": "module.service.module.api[0]",
      "mode": "managed",
      "type": "aws_api_gateway_deployment",
      "name": "deployment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_date": "2022-05-20T06:49:19Z",
            "description": "",
            "execution_arn": "arn:aws:execute-api:ap-southeast-2:340502884936:u202i3giu0/",
            "id": "2a1pf2",
            "invoke_url": "https://u202i3giu0.execute-api.ap-southeast-2.amazonaws.com/",
            "rest_api_id": "u202i3giu0",
            "stage_description": null,
            "stage_name": null,
            "triggers": {
              "redeployment": "16e281c868a25b9a93518357947cbb7979a6c9b1"
            },
            "variables": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.service.module.api_function.data.aws_iam_policy_document.allow_dlq_kms_access",
            "module.service.module.api_function.module.dlq.aws_kms_key.key",
            "module.service.module.api_function.module.dlq.aws_sqs_queue.dead_letter_queue",
            "module.service.module.api_function.module.dlq.aws_sqs_queue.queue",
            "module.service.module.sns.aws_iam_role.failures_log",
            "module.service.module.sns.data.aws_region.current",
            "module.service.module.api.aws_api_gateway_rest_api.api",
            "module.service.module.sns.aws_kms_key.key",
            "module.service.module.sns.aws_sns_topic.topic",
            "module.service.module.sns.data.aws_iam_policy_document.can_log",
            "module.service.module.sns.module.errors_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.module.api_function.module.dlq.data.aws_iam_policy_document.key_policy",
            "module.service.module.api_function.aws_iam_role.iam_for_lambda",
            "module.service.module.api_function.aws_lambda_function.lambda",
            "module.service.module.api_function.aws_lambda_layer_version.layers",
            "module.service.module.api_function.module.dlq.data.aws_caller_identity.me",
            "module.service.module.api_function.module.dlq.data.aws_region.current",
            "module.service.module.sns.aws_kms_alias.alias",
            "module.service.module.sns.data.aws_iam_policy_document.key_policy",
            "module.service.data.archive_file.source",
            "module.service.module.api_function.data.aws_region.current",
            "module.service.module.sns.aws_iam_role_policy.can_log",
            "module.service.module.sns.data.aws_caller_identity.me",
            "module.service.module.sns.data.aws_iam_policy_document.topic_policy",
            "module.service.data.archive_file.dependencies"
          ],
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.service.module.api[0]",
      "mode": "managed",
      "type": "aws_api_gateway_method_settings",
      "name": "api_settings",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "u202i3giu0-live-*/*",
            "method_path": "*/*",
            "rest_api_id": "u202i3giu0",
            "settings": [
              {
                "cache_data_encrypted": false,
                "cache_ttl_in_seconds": 300,
                "caching_enabled": false,
                "data_trace_enabled": true,
                "logging_level": "INFO",
                "metrics_enabled": true,
                "require_authorization_for_cache_control": true,
                "throttling_burst_limit": -1,
                "throttling_rate_limit": -1,
                "unauthorized_cache_control_header_strategy": "SUCCEED_WITH_RESPONSE_HEADER"
              }
            ],
            "stage_name": "live"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.service.module.api_function.data.aws_iam_policy_document.allow_dlq_kms_access",
            "module.service.module.sns.aws_kms_alias.alias",
            "module.service.module.sns.data.aws_caller_identity.me",
            "module.service.module.sns.data.aws_iam_policy_document.topic_policy",
            "module.service.module.sns.module.errors_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.module.sns.data.aws_iam_policy_document.can_log",
            "module.service.module.api.aws_api_gateway_deployment.deployment",
            "module.service.module.api.module.log_group.aws_kms_key.key",
            "module.service.module.api_function.aws_lambda_function.lambda",
            "module.service.module.api_function.module.dlq.aws_sqs_queue.dead_letter_queue",
            "module.service.module.api_function.module.dlq.data.aws_caller_identity.me",
            "module.service.module.sns.aws_iam_role.failures_log",
            "module.service.module.sns.aws_iam_role_policy.can_log",
            "module.service.module.sns.data.aws_iam_policy_document.key_policy",
            "module.service.data.archive_file.dependencies",
            "module.service.data.archive_file.source",
            "module.service.module.api_function.aws_iam_role.iam_for_lambda",
            "module.service.module.sns.aws_kms_key.key",
            "module.service.module.api.module.log_group.aws_cloudwatch_log_group.log_group",
            "module.service.module.sns.data.aws_region.current",
            "module.service.module.api_function.module.dlq.aws_kms_key.key",
            "module.service.module.api_function.module.dlq.data.aws_region.current",
            "module.service.module.sns.aws_sns_topic.topic",
            "module.service.module.api.aws_api_gateway_rest_api.api",
            "module.service.module.api_function.aws_lambda_layer_version.layers",
            "module.service.module.api_function.data.aws_region.current",
            "module.service.module.api_function.module.dlq.aws_sqs_queue.queue",
            "module.service.module.api.aws_api_gateway_stage.default_stage",
            "module.service.module.api.module.log_group.data.aws_caller_identity.me",
            "module.service.module.api.module.log_group.data.aws_region.current",
            "module.service.module.api_function.module.dlq.data.aws_iam_policy_document.key_policy"
          ]
        }
      ]
    },
    {
      "module": "module.service.module.api[0]",
      "mode": "managed",
      "type": "aws_api_gateway_rest_api",
      "name": "api",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_key_source": "HEADER",
            "arn": "arn:aws:apigateway:ap-southeast-2::/restapis/u202i3giu0",
            "binary_media_types": [],
            "body": "{\n  \"openapi\": \"3.0.1\",\n  \"info\": {\n    \"title\": \"Platform In A Box ECommerce Pricing API\",\n    \"version\": \"1.0.0\"\n  },\n  \"paths\": {\n    \"/item/{sku}/price\": {\n      \"get\": {\n        \"parameters\": [\n          {\n            \"in\": \"path\",\n            \"name\": \"sku\",\n            \"required\": true,\n            \"schema\": {\n              \"type\": \"string\"\n            }\n          },\n          {\n            \"in\": \"query\",\n            \"name\": \"count\",\n            \"required\": false,\n            \"schema\": {\n              \"type\": \"integer\"\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"description\": \"OK\"\n                }\n              }\n            }\n          }\n        },\n        \"x-amazon-apigateway-integration\": {\n          \"type\": \"AWS_PROXY\",\n          \"httpMethod\": \"POST\",\n          \"uri\": \"arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-southeast-2:340502884936:function:PricingServiceApiHandler/invocations\",\n          \"payloadFormatVersion\": \"1.0\"\n        }\n      }\n    }\n  }\n}",
            "created_date": "2022-05-20T06:49:17Z",
            "description": "",
            "disable_execute_api_endpoint": false,
            "endpoint_configuration": [
              {
                "types": [
                  "EDGE"
                ],
                "vpc_endpoint_ids": []
              }
            ],
            "execution_arn": "arn:aws:execute-api:ap-southeast-2:340502884936:u202i3giu0",
            "id": "u202i3giu0",
            "minimum_compression_size": -1,
            "name": "PricingService",
            "parameters": null,
            "policy": "",
            "root_resource_id": "4xu2tqsei2",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.service.module.api_function.data.aws_region.current",
            "module.service.module.sns.aws_kms_key.key",
            "module.service.module.sns.data.aws_caller_identity.me",
            "module.service.module.api_function.aws_lambda_function.lambda",
            "module.service.module.api_function.data.aws_iam_policy_document.allow_dlq_kms_access",
            "module.service.module.api_function.module.dlq.aws_sqs_queue.dead_letter_queue",
            "module.service.module.api_function.module.dlq.data.aws_region.current",
            "module.service.module.sns.aws_iam_role_policy.can_log",
            "module.service.module.sns.aws_kms_alias.alias",
            "module.service.module.sns.data.aws_iam_policy_document.topic_policy",
            "module.service.module.sns.module.errors_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.data.archive_file.dependencies",
            "module.service.module.api_function.aws_iam_role.iam_for_lambda",
            "module.service.module.api_function.module.dlq.aws_kms_key.key",
            "module.service.module.api_function.module.dlq.aws_sqs_queue.queue",
            "module.service.module.api_function.module.dlq.data.aws_caller_identity.me",
            "module.service.module.sns.aws_iam_role.failures_log",
            "module.service.module.sns.aws_sns_topic.topic",
            "module.service.module.sns.data.aws_iam_policy_document.can_log",
            "module.service.data.archive_file.source",
            "module.service.module.api_function.module.dlq.data.aws_iam_policy_document.key_policy",
            "module.service.module.sns.data.aws_iam_policy_document.key_policy",
            "module.service.module.sns.data.aws_region.current",
            "module.service.module.api_function.aws_lambda_layer_version.layers"
          ],
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.service.module.api[0]",
      "mode": "managed",
      "type": "aws_api_gateway_stage",
      "name": "default_stage",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_log_settings": [
              {
                "destination_arn": "arn:aws:logs:ap-southeast-2:340502884936:log-group:/aws/api-gateway-stage/PricingService-live/access-logs",
                "format": "{ \"requestId\":\"$context.requestId\",  \"ip\": \"$context.identity.sourceIp\",  \"caller\":\"$context.identity.caller\",  \"user\":\"$context.identity.user\",  \"requestTime\":\"$context.requestTime\",  \"httpMethod\":\"$context.httpMethod\",  \"resourcePath\":\"$context.resourcePath\",  \"path\":\"$context.path\",  \"status\":\"$context.status\",  \"protocol\":\"$context.protocol\",  \"error\": \"$context.error.message\",  \"integrationError\": \"$context.integrationErrorMessage\",  \"xrayTraceId\": \"$context.xrayTraceId\",  \"integrationLatency\": \"$context.integration.latency\",  \"responseLatency\": \"$context.responseLatency\"}"
              }
            ],
            "arn": "arn:aws:apigateway:ap-southeast-2::/restapis/u202i3giu0/stages/live",
            "cache_cluster_enabled": false,
            "cache_cluster_size": "",
            "canary_settings": [],
            "client_certificate_id": "",
            "deployment_id": "2a1pf2",
            "description": "",
            "documentation_version": "",
            "execution_arn": "arn:aws:execute-api:ap-southeast-2:340502884936:u202i3giu0/live",
            "id": "ags-u202i3giu0-live",
            "invoke_url": "https://u202i3giu0.execute-api.ap-southeast-2.amazonaws.com/live",
            "rest_api_id": "u202i3giu0",
            "stage_name": "live",
            "tags": {},
            "tags_all": {},
            "variables": {},
            "web_acl_arn": "",
            "xray_tracing_enabled": true
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.service.module.sns.data.aws_iam_policy_document.topic_policy",
            "module.service.module.api.aws_api_gateway_rest_api.api",
            "module.service.module.api.module.log_group.aws_kms_key.key",
            "module.service.module.api.module.log_group.data.aws_caller_identity.me",
            "module.service.module.api_function.module.dlq.aws_kms_key.key",
            "module.service.module.api_function.module.dlq.aws_sqs_queue.queue",
            "module.service.module.sns.aws_sns_topic.topic",
            "module.service.module.sns.aws_kms_alias.alias",
            "module.service.module.sns.data.aws_iam_policy_document.key_policy",
            "module.service.module.sns.module.errors_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.data.archive_file.dependencies",
            "module.service.module.api_function.data.aws_region.current",
            "module.service.module.api_function.module.dlq.aws_sqs_queue.dead_letter_queue",
            "module.service.module.sns.aws_kms_key.key",
            "module.service.module.sns.data.aws_region.current",
            "module.service.data.archive_file.source",
            "module.service.module.api.module.log_group.data.aws_region.current",
            "module.service.module.api_function.aws_lambda_layer_version.layers",
            "module.service.module.api_function.data.aws_iam_policy_document.allow_dlq_kms_access",
            "module.service.module.sns.aws_iam_role_policy.can_log",
            "module.service.module.api_function.module.dlq.data.aws_iam_policy_document.key_policy",
            "module.service.module.sns.data.aws_caller_identity.me",
            "module.service.module.sns.data.aws_iam_policy_document.can_log",
            "module.service.module.api.aws_api_gateway_deployment.deployment",
            "module.service.module.api_function.aws_iam_role.iam_for_lambda",
            "module.service.module.api_function.aws_lambda_function.lambda",
            "module.service.module.api_function.module.dlq.data.aws_caller_identity.me",
            "module.service.module.sns.aws_iam_role.failures_log",
            "module.service.module.api.module.log_group.aws_cloudwatch_log_group.log_group",
            "module.service.module.api_function.module.dlq.data.aws_region.current"
          ]
        }
      ]
    },
    {
      "module": "module.service.module.api[0].module.alarm_500s[0]",
      "mode": "managed",
      "type": "aws_cloudwatch_metric_alarm",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "Api Gateway PricingService returned a 500",
            "alarm_name": "api-gwPricingService",
            "arn": "arn:aws:cloudwatch:ap-southeast-2:340502884936:alarm:api-gwPricingService",
            "comparison_operator": "GreaterThanOrEqualToThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "ApiName": "PricingService",
              "Stage": "live"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "api-gwPricingService",
            "insufficient_data_actions": [],
            "metric_name": "5XXError",
            "metric_query": [],
            "namespace": "AWS/ApiGateway",
            "ok_actions": [],
            "period": 60,
            "statistic": "Maximum",
            "tags": {},
            "tags_all": {},
            "threshold": 1,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": "Count"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "module": "module.service.module.api[0].module.log_group",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "me",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "340502884936",
            "arn": "arn:aws:sts::340502884936:assumed-role/Admin/aws-go-sdk-1653037239919806389",
            "id": "340502884936",
            "user_id": "AROAU6R4NWJEPZNY6XSG3:aws-go-sdk-1653037239919806389"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.service.module.api[0].module.log_group",
      "mode": "data",
      "type": "aws_region",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "Asia Pacific (Sydney)",
            "endpoint": "ec2.ap-southeast-2.amazonaws.com",
            "id": "ap-southeast-2",
            "name": "ap-southeast-2"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.service.module.api[0].module.log_group",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "log_group",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:ap-southeast-2:340502884936:log-group:/aws/api-gateway-stage/PricingService-live/access-logs",
            "id": "/aws/api-gateway-stage/PricingService-live/access-logs",
            "kms_key_id": "arn:aws:kms:ap-southeast-2:340502884936:key/9c385ac2-3444-443d-a8e1-af42355dfcb6",
            "name": "/aws/api-gateway-stage/PricingService-live/access-logs",
            "name_prefix": null,
            "retention_in_days": 90,
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.service.module.sns.aws_kms_key.key",
            "module.service.module.sns.aws_sns_topic.topic",
            "module.service.module.sns.data.aws_iam_policy_document.can_log",
            "module.service.module.api.module.log_group.data.aws_caller_identity.me",
            "module.service.module.api_function.data.aws_iam_policy_document.allow_dlq_kms_access",
            "module.service.module.sns.aws_iam_role_policy.can_log",
            "module.service.module.api_function.data.aws_region.current",
            "module.service.module.api_function.module.dlq.aws_sqs_queue.queue",
            "module.service.module.api_function.aws_lambda_layer_version.layers",
            "module.service.module.api.aws_api_gateway_rest_api.api",
            "module.service.module.api_function.module.dlq.data.aws_caller_identity.me",
            "module.service.data.archive_file.source",
            "module.service.module.api_function.aws_iam_role.iam_for_lambda",
            "module.service.module.api_function.module.dlq.aws_kms_key.key",
            "module.service.module.sns.data.aws_caller_identity.me",
            "module.service.module.sns.module.errors_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.data.archive_file.dependencies",
            "module.service.module.api.module.log_group.aws_kms_key.key",
            "module.service.module.sns.aws_kms_alias.alias",
            "module.service.module.sns.data.aws_iam_policy_document.key_policy",
            "module.service.module.sns.data.aws_iam_policy_document.topic_policy",
            "module.service.module.sns.data.aws_region.current",
            "module.service.module.api_function.module.dlq.aws_sqs_queue.dead_letter_queue",
            "module.service.module.api_function.module.dlq.data.aws_region.current",
            "module.service.module.sns.aws_iam_role.failures_log",
            "module.service.module.api.module.log_group.data.aws_region.current",
            "module.service.module.api_function.aws_lambda_function.lambda",
            "module.service.module.api_function.module.dlq.data.aws_iam_policy_document.key_policy"
          ]
        }
      ]
    },
    {
      "module": "module.service.module.api[0].module.log_group",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "alias",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:ap-southeast-2:340502884936:alias/log-group/aws/api-gateway-stage/PricingService-live/access-logs",
            "id": "alias/log-group/aws/api-gateway-stage/PricingService-live/access-logs",
            "name": "alias/log-group/aws/api-gateway-stage/PricingService-live/access-logs",
            "name_prefix": "",
            "target_key_arn": "arn:aws:kms:ap-southeast-2:340502884936:key/9c385ac2-3444-443d-a8e1-af42355dfcb6",
            "target_key_id": "9c385ac2-3444-443d-a8e1-af42355dfcb6"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.service.module.api.module.log_group.data.aws_region.current",
            "module.service.module.sns.aws_kms_key.key",
            "module.service.module.sns.data.aws_iam_policy_document.key_policy",
            "module.service.data.archive_file.source",
            "module.service.module.api_function.aws_lambda_function.lambda",
            "module.service.module.api_function.data.aws_region.current",
            "module.service.module.api_function.module.dlq.aws_kms_key.key",
            "module.service.module.api_function.module.dlq.data.aws_caller_identity.me",
            "module.service.module.sns.aws_iam_role.failures_log",
            "module.service.module.sns.aws_iam_role_policy.can_log",
            "module.service.module.api.aws_api_gateway_rest_api.api",
            "module.service.module.api_function.module.dlq.aws_sqs_queue.queue",
            "module.service.module.sns.aws_sns_topic.topic",
            "module.service.module.sns.data.aws_caller_identity.me",
            "module.service.module.api_function.data.aws_iam_policy_document.allow_dlq_kms_access",
            "module.service.module.api_function.module.dlq.data.aws_iam_policy_document.key_policy",
            "module.service.module.api_function.module.dlq.data.aws_region.current",
            "module.service.module.sns.module.errors_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.module.api_function.aws_iam_role.iam_for_lambda",
            "module.service.module.sns.data.aws_iam_policy_document.can_log",
            "module.service.data.archive_file.dependencies",
            "module.service.module.api.module.log_group.aws_kms_key.key",
            "module.service.module.api_function.module.dlq.aws_sqs_queue.dead_letter_queue",
            "module.service.module.sns.data.aws_region.current",
            "module.service.module.api.module.log_group.data.aws_caller_identity.me",
            "module.service.module.api_function.aws_lambda_layer_version.layers",
            "module.service.module.sns.aws_kms_alias.alias",
            "module.service.module.sns.data.aws_iam_policy_document.topic_policy"
          ]
        }
      ]
    },
    {
      "module": "module.service.module.api[0].module.log_group",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "key",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:ap-southeast-2:340502884936:key/9c385ac2-3444-443d-a8e1-af42355dfcb6",
            "bypass_policy_lockout_safety_check": false,
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "Key for log group /aws/api-gateway-stage/PricingService-live/access-logs",
            "enable_key_rotation": true,
            "id": "9c385ac2-3444-443d-a8e1-af42355dfcb6",
            "is_enabled": true,
            "key_id": "9c385ac2-3444-443d-a8e1-af42355dfcb6",
            "key_usage": "ENCRYPT_DECRYPT",
            "multi_region": false,
            "policy": "{\n \"Version\": \"2012-10-17\",\n    \"Id\": \"LogGroup-aws-api-gateway-stage-PricingService-live-access-logsKeyPolicy\",\n    \"Statement\": [\n        {\n            \"Sid\": \"Enable IAM User Permissions\",\n            \"Effect\": \"Allow\",\n            \"Principal\": {\n                \"AWS\": \"arn:aws:iam::340502884936:root\"\n            },\n            \"Action\": \"kms:*\",\n            \"Resource\": \"*\"\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Principal\": {\n                \"Service\": \"logs.ap-southeast-2.amazonaws.com\"\n            },\n            \"Action\": [\n                \"kms:Encrypt*\",\n                \"kms:Decrypt*\",\n                \"kms:ReEncrypt*\",\n                \"kms:GenerateDataKey*\",\n                \"kms:Describe*\"\n            ],\n            \"Resource\": \"*\",\n            \"Condition\": {\n                \"ArnEquals\": {\n                    \"kms:EncryptionContext:aws:logs:arn\": \"arn:aws:logs:ap-southeast-2:340502884936:log-group:/aws/api-gateway-stage/PricingService-live/access-logs\"\n                }\n            }\n        }\n    ]\n}\n",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.service.module.api_function.module.dlq.aws_sqs_queue.dead_letter_queue",
            "module.service.module.api_function.module.dlq.aws_sqs_queue.queue",
            "module.service.module.sns.aws_iam_role.failures_log",
            "module.service.module.sns.data.aws_iam_policy_document.topic_policy",
            "module.service.module.api.aws_api_gateway_rest_api.api",
            "module.service.module.sns.data.aws_region.current",
            "module.service.module.sns.module.errors_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.module.api_function.module.dlq.data.aws_caller_identity.me",
            "module.service.module.api.module.log_group.data.aws_region.current",
            "module.service.module.sns.data.aws_caller_identity.me",
            "module.service.module.api.module.log_group.data.aws_caller_identity.me",
            "module.service.module.sns.aws_kms_alias.alias",
            "module.service.module.api_function.data.aws_region.current",
            "module.service.module.api_function.module.dlq.data.aws_iam_policy_document.key_policy",
            "module.service.module.sns.aws_iam_role_policy.can_log",
            "module.service.module.sns.aws_sns_topic.topic",
            "module.service.module.sns.data.aws_iam_policy_document.can_log",
            "module.service.module.sns.data.aws_iam_policy_document.key_policy",
            "module.service.data.archive_file.dependencies",
            "module.service.module.api_function.aws_lambda_layer_version.layers",
            "module.service.module.api_function.data.aws_iam_policy_document.allow_dlq_kms_access",
            "module.service.module.api_function.module.dlq.aws_kms_key.key",
            "module.service.module.sns.aws_kms_key.key",
            "module.service.data.archive_file.source",
            "module.service.module.api_function.aws_lambda_function.lambda",
            "module.service.module.api_function.module.dlq.data.aws_region.current",
            "module.service.module.api_function.aws_iam_role.iam_for_lambda"
          ]
        }
      ]
    },
    {
      "module": "module.service.module.api_function[\"apiHandler\"]",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "allow_dlq_kms_access",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "88172088",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"AllowLambdaDlqAccess\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:ReEncrypt\",\n        \"kms:GenerateDataKey*\",\n        \"kms:Encrypt\",\n        \"kms:DescribeKey\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::340502884936:role/PricingServiceApiHandlerExecutionRole\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "kms:Decrypt",
                  "kms:DescribeKey",
                  "kms:Encrypt",
                  "kms:GenerateDataKey*",
                  "kms:ReEncrypt"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::340502884936:role/PricingServiceApiHandlerExecutionRole"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "*"
                ],
                "sid": "AllowLambdaDlqAccess"
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.service.module.api_function[\"apiHandler\"]",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "can_log",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "2534134598",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"CanLog\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\"\n      ],\n      \"Resource\": [\n        \"arn:aws:logs:ap-southeast-2:340502884936:log-group:/aws/lambda/PricingServiceApiHandler:*\",\n        \"arn:aws:logs:ap-southeast-2:340502884936:log-group:/aws/lambda/PricingServiceApiHandler\"\n      ]\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "logs:CreateLogStream",
                  "logs:PutLogEvents"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:logs:ap-southeast-2:340502884936:log-group:/aws/lambda/PricingServiceApiHandler",
                  "arn:aws:logs:ap-southeast-2:340502884936:log-group:/aws/lambda/PricingServiceApiHandler:*"
                ],
                "sid": "CanLog"
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.service.module.api_function[\"apiHandler\"]",
      "mode": "data",
      "type": "aws_region",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "Asia Pacific (Sydney)",
            "endpoint": "ec2.ap-southeast-2.amazonaws.com",
            "id": "ap-southeast-2",
            "name": "ap-southeast-2"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.service.module.api_function[\"apiHandler\"]",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "iam_for_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::340502884936:role/PricingServiceApiHandlerExecutionRole",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
            "create_date": "2022-05-20T06:48:41Z",
            "description": "",
            "force_detach_policies": false,
            "id": "PricingServiceApiHandlerExecutionRole",
            "inline_policy": [
              {
                "name": "terraform-20220520064851473200000004",
                "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"CanLog\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\"\n      ],\n      \"Resource\": [\n        \"arn:aws:logs:ap-southeast-2:340502884936:log-group:/aws/lambda/PricingServiceApiHandler:*\",\n        \"arn:aws:logs:ap-southeast-2:340502884936:log-group:/aws/lambda/PricingServiceApiHandler\"\n      ]\n    }\n  ]\n}"
              },
              {
                "name": "terraform-20220520065713657500000001",
                "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"CanDynamo\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"dynamodb:UpdateItem\",\n        \"dynamodb:Query\",\n        \"dynamodb:PutItem\",\n        \"dynamodb:GetItem\",\n        \"dynamodb:DeleteItem\",\n        \"dynamodb:BatchWriteItem\",\n        \"dynamodb:BatchGetItem\"\n      ],\n      \"Resource\": \"arn:aws:dynamodb:ap-southeast-2:340502884936:table/PricingService\"\n    }\n  ]\n}"
              }
            ],
            "managed_policy_arns": [
              "arn:aws:iam::aws:policy/AWSXRayDaemonWriteAccess",
              "arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy"
            ],
            "max_session_duration": 3600,
            "name": "PricingServiceApiHandlerExecutionRole",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "tags_all": {},
            "unique_id": "AROAU6R4NWJEH7NFAA6MU"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.service.module.api_function[\"apiHandler\"]",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "can_log",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "PricingServiceApiHandlerExecutionRole:terraform-20220520064851473200000004",
            "name": "terraform-20220520064851473200000004",
            "name_prefix": null,
            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"CanLog\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\"\n      ],\n      \"Resource\": [\n        \"arn:aws:logs:ap-southeast-2:340502884936:log-group:/aws/lambda/PricingServiceApiHandler:*\",\n        \"arn:aws:logs:ap-southeast-2:340502884936:log-group:/aws/lambda/PricingServiceApiHandler\"\n      ]\n    }\n  ]\n}",
            "role": "PricingServiceApiHandlerExecutionRole"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.service.module.api_function.module.log_group.data.aws_region.current",
            "module.service.module.api_function.aws_iam_role.iam_for_lambda",
            "module.service.module.api_function.data.aws_iam_policy_document.can_log",
            "module.service.module.api_function.module.log_group.aws_cloudwatch_log_group.log_group",
            "module.service.module.api_function.module.log_group.aws_kms_key.key",
            "module.service.module.api_function.module.log_group.data.aws_caller_identity.me"
          ]
        }
      ]
    },
    {
      "module": "module.service.module.api_function[\"apiHandler\"]",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "aws_xray_write_only_access",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "PricingServiceApiHandlerExecutionRole-20220520064843761100000002",
            "policy_arn": "arn:aws:iam::aws:policy/AWSXRayDaemonWriteAccess",
            "role": "PricingServiceApiHandlerExecutionRole"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.service.module.api_function.aws_iam_role.iam_for_lambda"
          ]
        }
      ]
    },
    {
      "module": "module.service.module.api_function[\"apiHandler\"]",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "enhanced_monitoring",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "PricingServiceApiHandlerExecutionRole-20220520064843271200000001",
            "policy_arn": "arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
            "role": "PricingServiceApiHandlerExecutionRole"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.service.module.api_function.aws_iam_role.iam_for_lambda"
          ]
        }
      ]
    },
    {
      "module": "module.service.module.api_function[\"apiHandler\"]",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "insights_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "PricingServiceApiHandlerExecutionRole-20220520064844060800000003",
            "policy_arn": "arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
            "role": "PricingServiceApiHandlerExecutionRole"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.service.module.api_function.aws_iam_role.iam_for_lambda"
          ]
        }
      ]
    },
    {
      "module": "module.service.module.api_function[\"apiHandler\"]",
      "mode": "managed",
      "type": "aws_lambda_alias",
      "name": "lambda_alias",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:ap-southeast-2:340502884936:function:PricingServiceApiHandler:PricingServiceApiHandlerLatest",
            "description": "",
            "function_name": "arn:aws:lambda:ap-southeast-2:340502884936:function:PricingServiceApiHandler",
            "function_version": "4",
            "id": "arn:aws:lambda:ap-southeast-2:340502884936:function:PricingServiceApiHandler:PricingServiceApiHandlerLatest",
            "invoke_arn": "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-southeast-2:340502884936:function:PricingServiceApiHandler:PricingServiceApiHandlerLatest/invocations",
            "name": "PricingServiceApiHandlerLatest",
            "routing_config": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.service.data.archive_file.dependencies",
            "module.service.data.archive_file.source",
            "module.service.module.api_function.aws_iam_role.iam_for_lambda",
            "module.service.module.api_function.aws_lambda_function.lambda",
            "module.service.module.api_function.aws_lambda_layer_version.layers",
            "module.service.module.api_function.data.aws_region.current",
            "module.service.module.api_function.module.dlq.aws_sqs_queue.queue",
            "module.service.module.sns.aws_iam_role.failures_log",
            "module.service.module.sns.aws_iam_role_policy.can_log",
            "module.service.module.sns.aws_kms_alias.alias",
            "module.service.module.sns.aws_kms_key.key",
            "module.service.module.sns.aws_sns_topic.topic",
            "module.service.module.sns.data.aws_caller_identity.me",
            "module.service.module.sns.data.aws_iam_policy_document.can_log",
            "module.service.module.sns.data.aws_iam_policy_document.key_policy",
            "module.service.module.sns.data.aws_iam_policy_document.topic_policy",
            "module.service.module.sns.data.aws_region.current",
            "module.service.module.sns.module.errors_alarm.aws_cloudwatch_metric_alarm.this"
          ]
        }
      ]
    },
    {
      "module": "module.service.module.api_function[\"apiHandler\"]",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:ap-southeast-2:340502884936:function:PricingServiceApiHandler",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
                  "COMMIT_HASH": "aaa",
                  "DYNAMODB_TABLE_NAME": "PricingService"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./source.zip",
            "function_name": "PricingServiceApiHandler",
            "handler": "api.handler",
            "id": "PricingServiceApiHandler",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-southeast-2:340502884936:function:PricingServiceApiHandler/invocations",
            "kms_key_arn": "",
            "last_modified": "2022-05-20T09:01:23.000+0000",
            "layers": [
              "arn:aws:lambda:ap-southeast-2:580247275435:layer:LambdaInsightsExtension:16",
              "arn:aws:lambda:ap-southeast-2:340502884936:layer:dependencies:30"
            ],
            "memory_size": 512,
            "package_type": "Zip",
            "publish": true,
            "qualified_arn": "arn:aws:lambda:ap-southeast-2:340502884936:function:PricingServiceApiHandler:4",
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::340502884936:role/PricingServiceApiHandlerExecutionRole",
            "runtime": "nodejs16.x",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "source_code_hash": "fJqtdfwGGzVvX2auGlt2+1etp7LTRb/4Td5I9VQrNIM=",
            "source_code_size": 3280,
            "tags": {
              "Handles": "API",
              "ServiceName": "PricingService",
              "service": "PricingService"
            },
            "tags_all": {
              "Handles": "API",
              "ServiceName": "PricingService",
              "service": "PricingService"
            },
            "timeout": 3,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "Active"
              }
            ],
            "version": "4",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.service.data.archive_file.dependencies",
            "module.service.data.archive_file.source",
            "module.service.module.api_function.aws_iam_role.iam_for_lambda",
            "module.service.module.api_function.aws_lambda_layer_version.layers",
            "module.service.module.api_function.data.aws_region.current",
            "module.service.module.api_function.module.dlq.aws_sqs_queue.queue",
            "module.service.module.sns.aws_iam_role.failures_log",
            "module.service.module.sns.aws_iam_role_policy.can_log",
            "module.service.module.sns.aws_kms_alias.alias",
            "module.service.module.sns.aws_kms_key.key",
            "module.service.module.sns.aws_sns_topic.topic",
            "module.service.module.sns.data.aws_caller_identity.me",
            "module.service.module.sns.data.aws_iam_policy_document.can_log",
            "module.service.module.sns.data.aws_iam_policy_document.key_policy",
            "module.service.module.sns.data.aws_iam_policy_document.topic_policy",
            "module.service.module.sns.data.aws_region.current",
            "module.service.module.sns.module.errors_alarm.aws_cloudwatch_metric_alarm.this"
          ]
        }
      ]
    },
    {
      "module": "module.service.module.api_function[\"apiHandler\"]",
      "mode": "managed",
      "type": "aws_lambda_layer_version",
      "name": "layers",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "dependencies",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:ap-southeast-2:340502884936:layer:dependencies:30",
            "compatible_architectures": null,
            "compatible_runtimes": [
              "nodejs16.x"
            ],
            "created_date": "2022-05-20T09:01:11.868+0000",
            "description": "",
            "filename": "./dependencies.zip",
            "id": "arn:aws:lambda:ap-southeast-2:340502884936:layer:dependencies:30",
            "layer_arn": "arn:aws:lambda:ap-southeast-2:340502884936:layer:dependencies",
            "layer_name": "dependencies",
            "license_info": "",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "source_code_hash": "h9iz2EzPhsuK3L/yIyFyxna1UQWW01R3HtuZpGXdJ68=",
            "source_code_size": 14924697,
            "version": "30"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.service.data.archive_file.dependencies"
          ]
        }
      ]
    },
    {
      "module": "module.service.module.api_function[\"apiHandler\"].module.errors_alarm[0]",
      "mode": "managed",
      "type": "aws_cloudwatch_metric_alarm",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "Lambda function PricingServiceApiHandler has thrown an error",
            "alarm_name": "lambda-errors-PricingServiceApiHandler",
            "arn": "arn:aws:cloudwatch:ap-southeast-2:340502884936:alarm:lambda-errors-PricingServiceApiHandler",
            "comparison_operator": "GreaterThanOrEqualToThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "FunctionName": "PricingServiceApiHandler"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "lambda-errors-PricingServiceApiHandler",
            "insufficient_data_actions": [],
            "metric_name": "Errors",
            "metric_query": [],
            "namespace": "AWS/Lambda",
            "ok_actions": [],
            "period": 60,
            "statistic": "Maximum",
            "tags": {},
            "tags_all": {},
            "threshold": 1,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": "Count"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.service.data.archive_file.source",
            "module.service.module.api_function.data.aws_iam_policy_document.allow_dlq_kms_access",
            "module.service.module.sns.aws_iam_role_policy.can_log",
            "module.service.module.sns.aws_sns_topic.topic",
            "module.service.module.sns.data.aws_iam_policy_document.topic_policy",
            "module.service.module.api_function.aws_lambda_function.lambda",
            "module.service.module.api_function.data.aws_region.current",
            "module.service.module.api_function.module.dlq.aws_kms_key.key",
            "module.service.module.sns.aws_iam_role.failures_log",
            "module.service.module.sns.data.aws_iam_policy_document.key_policy",
            "module.service.module.sns.data.aws_region.current",
            "module.service.module.api_function.aws_iam_role.iam_for_lambda",
            "module.service.module.api_function.module.dlq.aws_sqs_queue.queue",
            "module.service.module.api_function.module.dlq.data.aws_caller_identity.me",
            "module.service.module.sns.module.errors_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.module.sns.aws_kms_key.key",
            "module.service.module.sns.data.aws_caller_identity.me",
            "module.service.data.archive_file.dependencies",
            "module.service.module.api_function.aws_lambda_layer_version.layers",
            "module.service.module.api_function.module.dlq.aws_sqs_queue.dead_letter_queue",
            "module.service.module.api_function.module.dlq.data.aws_iam_policy_document.key_policy",
            "module.service.module.api_function.module.dlq.data.aws_region.current",
            "module.service.module.sns.aws_kms_alias.alias",
            "module.service.module.sns.data.aws_iam_policy_document.can_log"
          ]
        }
      ]
    },
    {
      "module": "module.service.module.api_function[\"apiHandler\"].module.log_group",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "me",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "340502884936",
            "arn": "arn:aws:sts::340502884936:assumed-role/Admin/aws-go-sdk-1653037239919806389",
            "id": "340502884936",
            "user_id": "AROAU6R4NWJEPZNY6XSG3:aws-go-sdk-1653037239919806389"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.service.module.api_function[\"apiHandler\"].module.log_group",
      "mode": "data",
      "type": "aws_region",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "Asia Pacific (Sydney)",
            "endpoint": "ec2.ap-southeast-2.amazonaws.com",
            "id": "ap-southeast-2",
            "name": "ap-southeast-2"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.service.module.api_function[\"apiHandler\"].module.log_group",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "log_group",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:ap-southeast-2:340502884936:log-group:/aws/lambda/PricingServiceApiHandler",
            "id": "/aws/lambda/PricingServiceApiHandler",
            "kms_key_id": "arn:aws:kms:ap-southeast-2:340502884936:key/47d4299d-3c22-403e-9fc6-55f7a94a1a76",
            "name": "/aws/lambda/PricingServiceApiHandler",
            "name_prefix": null,
            "retention_in_days": 90,
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.service.module.api_function.module.log_group.aws_kms_key.key",
            "module.service.module.api_function.module.log_group.data.aws_caller_identity.me",
            "module.service.module.api_function.module.log_group.data.aws_region.current"
          ]
        }
      ]
    },
    {
      "module": "module.service.module.api_function[\"apiHandler\"].module.log_group",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "alias",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:ap-southeast-2:340502884936:alias/log-group/aws/lambda/PricingServiceApiHandler",
            "id": "alias/log-group/aws/lambda/PricingServiceApiHandler",
            "name": "alias/log-group/aws/lambda/PricingServiceApiHandler",
            "name_prefix": "",
            "target_key_arn": "arn:aws:kms:ap-southeast-2:340502884936:key/47d4299d-3c22-403e-9fc6-55f7a94a1a76",
            "target_key_id": "47d4299d-3c22-403e-9fc6-55f7a94a1a76"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.service.module.api_function.module.log_group.aws_kms_key.key",
            "module.service.module.api_function.module.log_group.data.aws_caller_identity.me",
            "module.service.module.api_function.module.log_group.data.aws_region.current"
          ]
        }
      ]
    },
    {
      "module": "module.service.module.api_function[\"apiHandler\"].module.log_group",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "key",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:ap-southeast-2:340502884936:key/47d4299d-3c22-403e-9fc6-55f7a94a1a76",
            "bypass_policy_lockout_safety_check": false,
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "Key for log group /aws/lambda/PricingServiceApiHandler",
            "enable_key_rotation": true,
            "id": "47d4299d-3c22-403e-9fc6-55f7a94a1a76",
            "is_enabled": true,
            "key_id": "47d4299d-3c22-403e-9fc6-55f7a94a1a76",
            "key_usage": "ENCRYPT_DECRYPT",
            "multi_region": false,
            "policy": "{\n \"Version\": \"2012-10-17\",\n    \"Id\": \"LogGroup-aws-lambda-PricingServiceApiHandlerKeyPolicy\",\n    \"Statement\": [\n        {\n            \"Sid\": \"Enable IAM User Permissions\",\n            \"Effect\": \"Allow\",\n            \"Principal\": {\n                \"AWS\": \"arn:aws:iam::340502884936:root\"\n            },\n            \"Action\": \"kms:*\",\n            \"Resource\": \"*\"\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Principal\": {\n                \"Service\": \"logs.ap-southeast-2.amazonaws.com\"\n            },\n            \"Action\": [\n                \"kms:Encrypt*\",\n                \"kms:Decrypt*\",\n                \"kms:ReEncrypt*\",\n                \"kms:GenerateDataKey*\",\n                \"kms:Describe*\"\n            ],\n            \"Resource\": \"*\",\n            \"Condition\": {\n                \"ArnEquals\": {\n                    \"kms:EncryptionContext:aws:logs:arn\": \"arn:aws:logs:ap-southeast-2:340502884936:log-group:/aws/lambda/PricingServiceApiHandler\"\n                }\n            }\n        }\n    ]\n}\n",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.service.module.api_function.module.log_group.data.aws_region.current",
            "module.service.module.api_function.module.log_group.data.aws_caller_identity.me"
          ]
        }
      ]
    },
    {
      "module": "module.service.module.api_function[\"apiHandler\"].module.throttles_alarm[0]",
      "mode": "managed",
      "type": "aws_cloudwatch_metric_alarm",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "Lambda function PricingServiceApiHandler has been throttled",
            "alarm_name": "lambda-throttles-PricingServiceApiHandler",
            "arn": "arn:aws:cloudwatch:ap-southeast-2:340502884936:alarm:lambda-throttles-PricingServiceApiHandler",
            "comparison_operator": "GreaterThanOrEqualToThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "FunctionName": "PricingServiceApiHandler"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "lambda-throttles-PricingServiceApiHandler",
            "insufficient_data_actions": [],
            "metric_name": "Throttles",
            "metric_query": [],
            "namespace": "AWS/Lambda",
            "ok_actions": [],
            "period": 60,
            "statistic": "Maximum",
            "tags": {},
            "tags_all": {},
            "threshold": 1,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": "Count"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.service.module.api_function.module.dlq.aws_sqs_queue.dead_letter_queue",
            "module.service.module.api_function.module.dlq.data.aws_iam_policy_document.key_policy",
            "module.service.module.sns.aws_iam_role.failures_log",
            "module.service.module.sns.aws_kms_alias.alias",
            "module.service.module.sns.data.aws_caller_identity.me",
            "module.service.module.sns.data.aws_region.current",
            "module.service.module.api_function.aws_iam_role.iam_for_lambda",
            "module.service.module.api_function.module.dlq.aws_kms_key.key",
            "module.service.module.api_function.module.dlq.data.aws_caller_identity.me",
            "module.service.module.sns.aws_iam_role_policy.can_log",
            "module.service.module.sns.data.aws_iam_policy_document.can_log",
            "module.service.module.sns.data.aws_iam_policy_document.key_policy",
            "module.service.module.sns.module.errors_alarm.aws_cloudwatch_metric_alarm.this",
            "module.service.data.archive_file.source",
            "module.service.module.api_function.module.dlq.aws_sqs_queue.queue",
            "module.service.module.api_function.data.aws_region.current",
            "module.service.module.sns.aws_sns_topic.topic",
            "module.service.module.sns.data.aws_iam_policy_document.topic_policy",
            "module.service.data.archive_file.dependencies",
            "module.service.module.api_function.data.aws_iam_policy_document.allow_dlq_kms_access",
            "module.service.module.api_function.module.dlq.data.aws_region.current",
            "module.service.module.sns.aws_kms_key.key",
            "module.service.module.api_function.aws_lambda_function.lambda",
            "module.service.module.api_function.aws_lambda_layer_version.layers"
          ]
        }
      ]
    },
    {
      "module": "module.service.module.table[0]",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "me",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "340502884936",
            "arn": "arn:aws:sts::340502884936:assumed-role/Admin/aws-go-sdk-1653037239919806389",
            "id": "340502884936",
            "user_id": "AROAU6R4NWJEPZNY6XSG3:aws-go-sdk-1653037239919806389"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.service.module.table[0]",
      "mode": "data",
      "type": "aws_region",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "Asia Pacific (Sydney)",
            "endpoint": "ec2.ap-southeast-2.amazonaws.com",
            "id": "ap-southeast-2",
            "name": "ap-southeast-2"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.service.module.table[0]",
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "table",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:ap-southeast-2:340502884936:table/PricingService",
            "attribute": [
              {
                "name": "hash",
                "type": "S"
              },
              {
                "name": "range",
                "type": "S"
              }
            ],
            "billing_mode": "PAY_PER_REQUEST",
            "global_secondary_index": [],
            "hash_key": "hash",
            "id": "PricingService",
            "local_secondary_index": [],
            "name": "PricingService",
            "point_in_time_recovery": [
              {
                "enabled": true
              }
            ],
            "range_key": "range",
            "read_capacity": 0,
            "replica": [],
            "restore_date_time": null,
            "restore_source_name": null,
            "restore_to_latest_time": null,
            "server_side_encryption": [
              {
                "enabled": true,
                "kms_key_arn": "arn:aws:kms:ap-southeast-2:340502884936:key/57af7103-ea16-4de4-affd-ca43cc6246a6"
              }
            ],
            "stream_arn": "",
            "stream_enabled": false,
            "stream_label": "",
            "stream_view_type": "",
            "table_class": "",
            "tags": {
              "ServiceName": "PricingService"
            },
            "tags_all": {
              "ServiceName": "PricingService"
            },
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "",
                "enabled": false
              }
            ],
            "write_capacity": 0
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjYwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.service.module.table.aws_kms_key.key",
            "module.service.module.table.data.aws_caller_identity.me",
            "module.service.module.table.data.aws_region.current"
          ]
        }
      ]
    },
    {
      "module": "module.service.module.table[0]",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "alias",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:ap-southeast-2:340502884936:alias/dynamodb/PricingService",
            "id": "alias/dynamodb/PricingService",
            "name": "alias/dynamodb/PricingService",
            "name_prefix": "",
            "target_key_arn": "arn:aws:kms:ap-southeast-2:340502884936:key/57af7103-ea16-4de4-affd-ca43cc6246a6",
            "target_key_id": "57af7103-ea16-4de4-affd-ca43cc6246a6"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.service.module.table.aws_kms_key.key",
            "module.service.module.table.data.aws_caller_identity.me",
            "module.service.module.table.data.aws_region.current"
          ]
        }
      ]
    },
    {
      "module": "module.service.module.table[0]",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "key",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:ap-southeast-2:340502884936:key/57af7103-ea16-4de4-affd-ca43cc6246a6",
            "bypass_policy_lockout_safety_check": false,
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "Key for managing dynamo table PricingService",
            "enable_key_rotation": true,
            "id": "57af7103-ea16-4de4-affd-ca43cc6246a6",
            "is_enabled": true,
            "key_id": "57af7103-ea16-4de4-affd-ca43cc6246a6",
            "key_usage": "ENCRYPT_DECRYPT",
            "multi_region": false,
            "policy": "{\n \"Version\": \"2012-10-17\",\n    \"Id\": \"DynamoTablePricingServiceKeyPolicy\",\n    \"Statement\": [\n        {\n            \"Sid\": \"Enable IAM User Permissions\",\n            \"Effect\": \"Allow\",\n            \"Principal\": {\n                \"AWS\": \"arn:aws:iam::340502884936:root\"\n            },\n            \"Action\": \"kms:*\",\n            \"Resource\": \"*\"\n        },\n        {\n            \"Sid\" : \"Allow access through Amazon DynamoDB for all principals in the account that are authorized to use Amazon DynamoDB\",\n            \"Effect\" : \"Allow\",\n            \"Principal\" : {\n              \"AWS\" : \"*\"\n            },\n            \"Action\" : [ \"kms:Encrypt\", \"kms:Decrypt\", \"kms:ReEncrypt*\", \"kms:GenerateDataKey*\", \"kms:CreateGrant\", \"kms:DescribeKey\" ],\n            \"Resource\" : \"*\",\n            \"Condition\" : {\n              \"StringEquals\" : {\n                \"kms:ViaService\" : \"dynamodb.ap-southeast-2.amazonaws.com\",\n                \"kms:CallerAccount\" : \"340502884936\"\n              }\n            }\n          },\n          {\n            \"Sid\" : \"Allow DynamoDB Service with service principal name dynamodb.amazonaws.com to describe the key directly\",\n            \"Effect\" : \"Allow\",\n            \"Principal\" : {\n              \"Service\" : \"dynamodb.amazonaws.com\"\n            },\n            \"Action\" : [ \"kms:Describe*\", \"kms:Get*\", \"kms:List*\" ],\n            \"Resource\" : \"*\"\n          }\n    ]\n}\n",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.service.module.table.data.aws_region.current",
            "module.service.module.table.data.aws_caller_identity.me"
          ]
        }
      ]
    },
    {
      "module": "module.service.module.table[0].module.system_errors_alarm[0]",
      "mode": "managed",
      "type": "aws_cloudwatch_metric_alarm",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "DynamoDB Table PricingService has raised a system error",
            "alarm_name": "dynamodb-table-PricingService-system-errors",
            "arn": "arn:aws:cloudwatch:ap-southeast-2:340502884936:alarm:dynamodb-table-PricingService-system-errors",
            "comparison_operator": "GreaterThanOrEqualToThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "TableName": "PricingService"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "dynamodb-table-PricingService-system-errors",
            "insufficient_data_actions": [],
            "metric_name": "SystemErrors",
            "metric_query": [],
            "namespace": "AWS/DynamoDB",
            "ok_actions": [],
            "period": 60,
            "statistic": "Sum",
            "tags": {},
            "tags_all": {},
            "threshold": 1,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": "Count"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.service.module.table.aws_dynamodb_table.table",
            "module.service.module.table.aws_kms_key.key",
            "module.service.module.table.data.aws_caller_identity.me",
            "module.service.module.table.data.aws_region.current"
          ]
        }
      ]
    },
    {
      "module": "module.service.module.table[0].module.transaction_conflict_alarm[0]",
      "mode": "managed",
      "type": "aws_cloudwatch_metric_alarm",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "DynamoDB Table PricingService has exceeded configured transaction conflicts threshold",
            "alarm_name": "dynamodb-table-PricingService-tx-conflict",
            "arn": "arn:aws:cloudwatch:ap-southeast-2:340502884936:alarm:dynamodb-table-PricingService-tx-conflict",
            "comparison_operator": "GreaterThanOrEqualToThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "TableName": "PricingService"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "dynamodb-table-PricingService-tx-conflict",
            "insufficient_data_actions": [],
            "metric_name": "TransactionConflict",
            "metric_query": [],
            "namespace": "AWS/DynamoDB",
            "ok_actions": [],
            "period": 60,
            "statistic": "Sum",
            "tags": {},
            "tags_all": {},
            "threshold": 1,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": "Count"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.service.module.table.aws_dynamodb_table.table",
            "module.service.module.table.aws_kms_key.key",
            "module.service.module.table.data.aws_caller_identity.me",
            "module.service.module.table.data.aws_region.current"
          ]
        }
      ]
    }
  ]
}
